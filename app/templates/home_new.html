{% extends "base.html" %}
{% block title %}BIMBA - Home{% endblock %}

{% block titulo_sistema %}{% endblock %}

{% block head_extra %}
<style>
    .stats-header {
        text-align: center;
        margin-bottom: 30px;
        padding: 20px;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        border-radius: 15px;
        border: 2px solid rgba(102, 126, 234, 0.3);
    }

    .stats-header h1 {
        color: #00ff00;
        margin: 0 0 10px 0;
        font-size: 2.5rem;
    }

    .stats-header .subtitle {
        color: #aaa;
        font-size: 1.1rem;
    }

    .live-indicator {
        display: inline-block;
        width: 12px;
        height: 12px;
        background: #00ff00;
        border-radius: 50%;
        animation: pulse 2s infinite;
        margin-right: 8px;
    }

    @keyframes pulse {
        0%, 100% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.5; transform: scale(1.2); }
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        border: 2px solid rgba(102, 126, 234, 0.3);
        padding: 25px;
        border-radius: 15px;
        text-align: center;
        transition: all 0.3s;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }

    .stat-card:hover {
        border-color: #667eea;
        transform: translateY(-5px);
        box-shadow: 0 15px 40px rgba(102, 126, 234, 0.3);
    }

    .stat-card h3 {
        color: #667eea;
        margin: 0 0 15px 0;
        font-size: 1.1rem;
        font-weight: bold;
    }

    .stat-card .value {
        font-size: 3rem;
        font-weight: bold;
        margin: 0;
        color: #00ff00;
        transition: all 0.3s;
    }

    .stat-card .value.updating {
        animation: pulseUpdate 0.5s ease-in-out;
    }

    @keyframes pulseUpdate {
        0%, 100% { transform: scale(1); color: #00ff00; }
        50% { transform: scale(1.2); color: #00cc00; }
    }

    .stat-card .subtitle {
        font-size: 0.95rem;
        color: #aaa;
        margin-top: 10px;
    }

    /* Alertas de Hora */
    .hour-alert {
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 30px;
        border: 3px solid;
        animation: pulse 3s infinite;
    }

    .hour-alert h3 {
        color: #fff;
        margin-top: 0;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .hour-alert p {
        color: #fff;
        font-size: 1.1rem;
        margin: 10px 0;
    }

    .hour-alert.slow-hour {
        background: linear-gradient(135deg, #0066ff 0%, #0088ff 100%);
        border-color: #00aaff;
    }

    .hour-alert.busy-hour {
        background: linear-gradient(135deg, #ff6b00 0%, #ff8800 100%);
        border-color: #ffaa00;
    }

    /* Gr√°fico del D√≠a */
    .chart-container {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        border: 2px solid rgba(102, 126, 234, 0.3);
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }

    .chart-container h3 {
        color: #00ff00;
        margin-top: 0;
        margin-bottom: 20px;
        font-size: 1.5rem;
    }

    .chart-wrapper {
        position: relative;
        height: 300px;
    }

    /* Rankings del D√≠a */
    .rankings-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .ranking-card {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        border: 2px solid rgba(102, 126, 234, 0.3);
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }

    .ranking-card h3 {
        color: #00ff00;
        margin-top: 0;
        margin-bottom: 15px;
        font-size: 1.3rem;
    }

    .ranking-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .ranking-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px;
        margin-bottom: 8px;
        background: rgba(42, 42, 62, 0.5);
        border-radius: 8px;
        border-left: 3px solid #667eea;
        transition: all 0.3s;
    }

    .ranking-item:hover {
        background: rgba(102, 126, 234, 0.2);
        border-left-color: #00ff00;
    }

    .ranking-item .rank {
        font-weight: bold;
        color: #667eea;
        min-width: 30px;
    }

    .ranking-item .name {
        flex: 1;
        color: #e8e8e8;
        margin-left: 10px;
    }

    .ranking-item .count {
        font-weight: bold;
        color: #00ff00;
        font-size: 1.2rem;
    }

    /* Entradas del D√≠a */
    .entradas-container {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        border: 3px solid #0066ff;
        padding: 30px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }

    .entradas-container h2 {
        color: #00ff00;
        margin-top: 0;
        margin-bottom: 20px;
        font-size: 2rem;
    }

    .entradas-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
    }

    .entrada-card {
        background: rgba(0, 102, 255, 0.2);
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        border: 2px solid #0066ff;
    }

    .entrada-card.green {
        background: rgba(0, 170, 0, 0.2);
        border-color: #00aa00;
    }

    .entrada-card.orange {
        background: rgba(255, 136, 0, 0.2);
        border-color: #ff8800;
    }

    .entrada-card h4 {
        color: #fff;
        margin: 0 0 10px 0;
    }

    .entrada-card .value {
        font-size: 2.5rem;
        font-weight: bold;
        color: #fff;
        margin: 0;
    }

    @media (max-width: 768px) {
        .stats-grid {
            grid-template-columns: 1fr;
        }
        .chart-wrapper {
            height: 250px;
        }
    .rankings-container {
        grid-template-columns: 1fr;
        }
    }
    
    .shift-summary-section {
        animation: slideIn 0.5s ease-out;
    }
    
    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes pulse {
        0%, 100% {
            opacity: 1;
            transform: scale(1);
        }
        50% {
            opacity: 0.7;
            transform: scale(1.1);
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Resumen del Turno (PROMINENTE) -->
{% if shift_status and shift_status.get('is_open', False) and shift_metrics %}
<div class="shift-summary-section" style="margin-bottom: 40px; background: linear-gradient(135deg, rgba(76, 175, 80, 0.2) 0%, rgba(76, 175, 80, 0.1) 100%); border: 3px solid rgba(76, 175, 80, 0.5); border-radius: 20px; padding: 30px; box-shadow: 0 10px 40px rgba(76, 175, 80, 0.2);">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; flex-wrap: wrap; gap: 15px;">
        <div>
            <h1 style="margin: 0; color: #4caf50; font-size: 2.2rem; display: flex; align-items: center; gap: 15px;">
                <span style="font-size: 2.5rem;">üïê</span>
                <span>TURNO ACTUAL</span>
                <span style="display: inline-block; width: 16px; height: 16px; background: #4caf50; border-radius: 50%; animation: pulse 2s infinite; margin-left: 10px;"></span>
            </h1>
            <p style="margin: 10px 0 0 0; color: #aaa; font-size: 1.1rem;">
                <strong>Fiesta:</strong> {{ shift_status.get('fiesta_nombre', 'N/A') }} 
                {% if shift_status.get('djs') %} | <strong>DJs:</strong> {{ shift_status.get('djs', 'N/A') }}{% endif %}
            </p>
        </div>
        <div style="text-align: right;">
            <div style="font-size: 1.3rem; color: #4caf50; font-weight: bold; margin-bottom: 5px;">
                ‚è±Ô∏è {{ shift_metrics.get('tiempo_transcurrido', 'N/A') }}
            </div>
            <div style="font-size: 0.9rem; color: #aaa;">
                Desde: {{ shift_status.get('opened_at', '')[:16] if shift_status.get('opened_at') else 'N/A' }}
            </div>
        </div>
    </div>
    
    <!-- M√©tricas R√°pidas del Turno -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
        <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 20px; text-align: center; border: 1px solid rgba(76, 175, 80, 0.3);">
            <div style="font-size: 2.5rem; margin-bottom: 10px;">üì¶</div>
            <div style="font-size: 2rem; font-weight: bold; color: #4caf50; margin-bottom: 5px;">{{ shift_metrics.get('total_entregas', 0) }}</div>
            <div style="font-size: 0.9rem; color: #aaa;">Entregas</div>
        </div>
        <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 20px; text-align: center; border: 1px solid rgba(102, 126, 234, 0.3);">
            <div style="font-size: 2.5rem; margin-bottom: 10px;">üé´</div>
            <div style="font-size: 2rem; font-weight: bold; color: #667eea; margin-bottom: 5px;">{{ shift_metrics.get('total_entradas', 0) }}</div>
            <div style="font-size: 0.9rem; color: #aaa;">Entradas</div>
        </div>
        <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 20px; text-align: center; border: 1px solid rgba(255, 193, 7, 0.3);">
            <div style="font-size: 2.5rem; margin-bottom: 10px;">üí∞</div>
            <div style="font-size: 2rem; font-weight: bold; color: #ffc107; margin-bottom: 5px;">${{ "{:,.0f}".format(shift_metrics.get('monto_kiosko', 0)) }}</div>
            <div style="font-size: 0.9rem; color: #aaa;">Kiosko</div>
        </div>
        <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 20px; text-align: center; border: 1px solid rgba(255, 152, 0, 0.3);">
            <div style="font-size: 2.5rem; margin-bottom: 10px;">‚è∞</div>
            <div style="font-size: 2rem; font-weight: bold; color: #ff9800; margin-bottom: 5px;">
                {% if shift_metrics.get('peak_hour') is not none %}{{ "%02d:00"|format(shift_metrics.get('peak_hour')) }}{% else %}N/A{% endif %}
            </div>
            <div style="font-size: 0.9rem; color: #aaa;">Hora Pico ({{ shift_metrics.get('peak_hour_count', 0) }})</div>
        </div>
    </div>
    
    <!-- Top 3 Productos y Bartenders -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
        <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 20px; border: 1px solid rgba(102, 126, 234, 0.3);">
            <h4 style="margin: 0 0 15px 0; color: #667eea; font-size: 1.1rem;">üèÜ Top 3 Productos</h4>
            {% if shift_metrics.get('top_productos') %}
                {% for producto, cantidad in shift_metrics.get('top_productos', [])[:3] %}
                <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <span style="color: #e8e8e8;">{{ loop.index }}. {{ producto }}</span>
                    <span style="color: #4caf50; font-weight: bold;">{{ cantidad }}</span>
                </div>
                {% endfor %}
            {% else %}
                <p style="color: #aaa; margin: 0;">Sin entregas a√∫n</p>
            {% endif %}
        </div>
        <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 20px; border: 1px solid rgba(76, 175, 80, 0.3);">
            <h4 style="margin: 0 0 15px 0; color: #4caf50; font-size: 1.1rem;">üë• Top 3 Bartenders</h4>
            {% if shift_metrics.get('top_bartenders') %}
                {% for bartender, cantidad in shift_metrics.get('top_bartenders', [])[:3] %}
                <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <span style="color: #e8e8e8;">{{ loop.index }}. {{ bartender }}</span>
                    <span style="color: #4caf50; font-weight: bold;">{{ cantidad }}</span>
                </div>
                {% endfor %}
            {% else %}
                <p style="color: #aaa; margin: 0;">Sin entregas a√∫n</p>
            {% endif %}
        </div>
    </div>
    
    <!-- Botones de Acci√≥n -->
    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
        <a href="{{ url_for('routes.open_shift') }}" style="flex: 1; min-width: 150px; padding: 12px 24px; background: rgba(102, 126, 234, 0.3); border: 2px solid rgba(102, 126, 234, 0.5); border-radius: 10px; color: #667eea; text-decoration: none; font-weight: 600; text-align: center; transition: all 0.3s;" onmouseover="this.style.background='rgba(102, 126, 234, 0.5)'; this.style.borderColor='rgba(102, 126, 234, 0.7)';" onmouseout="this.style.background='rgba(102, 126, 234, 0.3)'; this.style.borderColor='rgba(102, 126, 234, 0.5)';">
            ‚úèÔ∏è Modificar Turno
        </a>
        <a href="{{ url_for('routes.close_shift') }}" style="flex: 1; min-width: 150px; padding: 12px 24px; background: rgba(220, 53, 69, 0.2); border: 2px solid rgba(220, 53, 69, 0.5); border-radius: 10px; color: #dc3545; text-decoration: none; font-weight: 600; text-align: center; transition: all 0.3s;" onclick="return confirm('¬øEst√°s seguro de que deseas cerrar el turno? Esto limpiar√° todos los logs, encuestas y contadores del turno.');" onmouseover="this.style.background='rgba(220, 53, 69, 0.3)'; this.style.borderColor='rgba(220, 53, 69, 0.7)';" onmouseout="this.style.background='rgba(220, 53, 69, 0.2)'; this.style.borderColor='rgba(220, 53, 69, 0.5)';">
            üîí Cerrar Turno
        </a>
    </div>
</div>
{% elif shift_status and not shift_status.get('is_open', False) %}
<!-- Alerta: Turno Cerrado -->
<div style="background: linear-gradient(135deg, rgba(255, 152, 0, 0.2) 0%, rgba(255, 152, 0, 0.1) 100%); border: 3px solid rgba(255, 152, 0, 0.5); border-radius: 20px; padding: 30px; box-shadow: 0 10px 40px rgba(255, 152, 0, 0.2); text-align: center; margin-bottom: 40px;">
    <h1 style="margin: 0 0 15px 0; color: #ff9800; font-size: 2rem; display: flex; align-items: center; justify-content: center; gap: 15px;">
        <span style="font-size: 2.5rem;">‚è∏Ô∏è</span>
        <span>TURNO CERRADO</span>
    </h1>
    <p style="margin: 0 0 25px 0; color: #aaa; font-size: 1.1rem;">
        No hay un turno abierto actualmente. Abre un turno para comenzar a registrar entregas y estad√≠sticas.
    </p>
    {% if shift_status.get('closed_at') %}
    <p style="margin: 0 0 25px 0; color: #888; font-size: 0.95rem;">
        √öltimo cierre: {{ shift_status.get('closed_at', '')[:16] if shift_status.get('closed_at') else 'N/A' }}
    </p>
    {% endif %}
    <a href="{{ url_for('routes.open_shift') }}" style="display: inline-block; padding: 15px 40px; background: rgba(76, 175, 80, 0.3); border: 2px solid rgba(76, 175, 80, 0.5); border-radius: 10px; color: #4caf50; text-decoration: none; font-weight: 600; font-size: 1.1rem; transition: all 0.3s;" onmouseover="this.style.background='rgba(76, 175, 80, 0.5)'; this.style.borderColor='rgba(76, 175, 80, 0.7)';" onmouseout="this.style.background='rgba(76, 175, 80, 0.3)'; this.style.borderColor='rgba(76, 175, 80, 0.5)';">
        üìÖ Abrir Turno
    </a>
</div>
{% endif %}


<!-- ZONA 1: ALERTAS Y ESTADO CR√çTICO -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin-bottom: 25px;">
    {% if shift_metrics %}
    <!-- Alerta de Ritmo -->
    <div style="background: {% if shift_metrics.get('ritmo_estado') == 'high' %}linear-gradient(135deg, rgba(255, 87, 34, 0.2) 0%, rgba(255, 87, 34, 0.1) 100%){% elif shift_metrics.get('ritmo_estado') == 'low' %}linear-gradient(135deg, rgba(33, 150, 243, 0.2) 0%, rgba(33, 150, 243, 0.1) 100%){% else %}linear-gradient(135deg, rgba(76, 175, 80, 0.2) 0%, rgba(76, 175, 80, 0.1) 100%){% endif %}; border: 2px solid {% if shift_metrics.get('ritmo_estado') == 'high' %}rgba(255, 87, 34, 0.5){% elif shift_metrics.get('ritmo_estado') == 'low' %}rgba(33, 150, 243, 0.5){% else %}rgba(76, 175, 80, 0.5){% endif %}; border-radius: 12px; padding: 20px;">
        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
            <span style="font-size: 1.8rem;">{% if shift_metrics.get('ritmo_estado') == 'high' %}üî•{% elif shift_metrics.get('ritmo_estado') == 'low' %}‚ö°{% else %}‚úÖ{% endif %}</span>
            <h3 style="margin: 0; color: {% if shift_metrics.get('ritmo_estado') == 'high' %}#ff5722{% elif shift_metrics.get('ritmo_estado') == 'low' %}#2196f3{% else %}#4caf50{% endif %}; font-size: 1.2rem;">
                {% if shift_metrics.get('ritmo_estado') == 'high' %}RITMO ALTO{% elif shift_metrics.get('ritmo_estado') == 'low' %}RITMO BAJO{% else %}RITMO NORMAL{% endif %}
            </h3>
        </div>
        <p style="margin: 5px 0; color: #e8e8e8; font-size: 1.1rem;">
            <strong>{{ shift_metrics.get('ritmo_actual', 0) }}</strong> entregas en √∫ltima hora
        </p>
        <p style="margin: 5px 0; color: #aaa; font-size: 0.9rem;">
            Promedio: {{ "%.1f"|format(shift_metrics.get('ritmo_promedio', 0)) }}/h 
            {% if shift_metrics.get('ritmo_porcentaje', 0) != 0 %}
            <span style="color: {% if shift_metrics.get('ritmo_porcentaje', 0) > 0 %}#4caf50{% else %}#f44336{% endif %};">
                ({{ "+" if shift_metrics.get('ritmo_porcentaje', 0) > 0 else "" }}{{ "%.0f"|format(shift_metrics.get('ritmo_porcentaje', 0)) }}%)
            </span>
            {% endif %}
        </p>
    </div>
    
    <!-- Tendencia -->
    <div style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(102, 126, 234, 0.1) 100%); border: 2px solid rgba(102, 126, 234, 0.5); border-radius: 12px; padding: 20px;">
        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
            <span style="font-size: 1.8rem;">
                {% if shift_metrics.get('tendencia_direccion') == 'up' %}üìà{% elif shift_metrics.get('tendencia_direccion') == 'down' %}üìâ{% else %}‚û°Ô∏è{% endif %}
            </span>
            <h3 style="margin: 0; color: #667eea; font-size: 1.2rem;">TENDENCIA</h3>
        </div>
        <p style="margin: 5px 0; color: #e8e8e8; font-size: 1.1rem;">
            <strong style="color: {% if shift_metrics.get('tendencia_direccion') == 'up' %}#4caf50{% elif shift_metrics.get('tendencia_direccion') == 'down' %}#f44336{% else %}#ff9800{% endif %};">
                {% if shift_metrics.get('tendencia_direccion') == 'up' %}‚Üë Mejorando{% elif shift_metrics.get('tendencia_direccion') == 'down' %}‚Üì Bajando{% else %}‚Üí Estable{% endif %}
            </strong>
        </p>
        <p style="margin: 5px 0; color: #aaa; font-size: 0.9rem;">
            {% if shift_metrics.get('tendencia_porcentaje', 0) != 0 %}
            {{ "+" if shift_metrics.get('tendencia_porcentaje', 0) > 0 else "" }}{{ "%.0f"|format(shift_metrics.get('tendencia_porcentaje', 0)) }}% vs hora anterior
            {% else %}
            Sin datos suficientes
            {% endif %}
        </p>
    </div>
    
    <!-- Velocidad (√∫ltimos 15 min) -->
    <div style="background: linear-gradient(135deg, rgba(255, 193, 7, 0.2) 0%, rgba(255, 193, 7, 0.1) 100%); border: 2px solid rgba(255, 193, 7, 0.5); border-radius: 12px; padding: 20px;">
        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
            <span style="font-size: 1.8rem;">‚ö°</span>
            <h3 style="margin: 0; color: #ffc107; font-size: 1.2rem;">VELOCIDAD</h3>
        </div>
        <p style="margin: 5px 0; color: #e8e8e8; font-size: 1.1rem;">
            <strong>{{ shift_metrics.get('velocidad_15min', 0) }}</strong> entregas (√∫ltimos 15 min)
        </p>
        <p style="margin: 5px 0; color: #aaa; font-size: 0.9rem;">
            Promedio: {{ "%.1f"|format(shift_metrics.get('velocidad_promedio_15min', 0)) }}
            {% if shift_metrics.get('velocidad_promedio_15min', 0) > 0 %}
            <span style="color: {% if shift_metrics.get('velocidad_15min', 0) >= shift_metrics.get('velocidad_promedio_15min', 0) %}#4caf50{% else %}#f44336{% endif %};">
                {% if shift_metrics.get('velocidad_15min', 0) >= shift_metrics.get('velocidad_promedio_15min', 0) %}‚úÖ{% else %}‚ö†Ô∏è{% endif %}
            </span>
            {% endif %}
        </p>
    </div>
    {% endif %}
    
    {% if is_busy_hour %}
    <div class="hour-alert busy-hour" style="grid-column: 1 / -1;">
        <h3>üî• HORA PICO DETECTADA</h3>
        <p><strong>Hora actual ({{ "%02d:00"|format(current_hour) }}):</strong> <span id="current-hour-count">{{ current_hour_count }}</span> entregas</p>
        <p><strong>üí° Acci√≥n:</strong> Aseg√∫rate de tener suficiente personal y productos listos. Es momento ideal para promociones r√°pidas.</p>
    </div>
    {% elif is_slow_hour %}
    <div class="hour-alert slow-hour" style="grid-column: 1 / -1;">
        <h3>‚ö° HORA LENTA</h3>
        <p><strong>Hora actual ({{ "%02d:00"|format(current_hour) }}):</strong> <span id="current-hour-count">{{ current_hour_count }}</span> entregas</p>
        <p><strong>üí° Acci√≥n:</strong> Considera promociones especiales o combos para reactivar el consumo.</p>
    </div>
    {% endif %}
</div>

<!-- ZONA 2: M√âTRICAS CLAVE (Simplificadas) -->
<div class="stats-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
    <div class="stat-card" style="background: linear-gradient(135deg, #4caf50 0%, #45a049 100%); border-color: #4caf50;">
        <h3 style="color: #fff;">üì¶ Entregas</h3>
        <p class="value" id="today-count" style="color: #fff;">{{ today_count }}</p>
        <p class="subtitle" style="color: rgba(255,255,255,0.8);">Total del turno</p>
    </div>
    <div class="stat-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-color: #667eea;">
        <h3 style="color: #fff;">‚ö° Ritmo</h3>
        <p class="value" id="ritmo-actual" style="color: #fff;">{{ shift_metrics.get('ritmo_actual', 0) if shift_metrics else 0 }}</p>
        <p class="subtitle" style="color: rgba(255,255,255,0.8);">√öltima hora</p>
    </div>
    <div class="stat-card" style="background: linear-gradient(135deg, #0066ff 0%, #0088ff 100%); border-color: #00aaff;">
        <h3 style="color: #fff;">üë• Personas</h3>
        <p class="value" id="personas-count" style="color: #fff;">{{ total_personas_en_local }}</p>
        <p class="subtitle" style="color: rgba(255,255,255,0.8);">En el local</p>
    </div>
    <div class="stat-card" style="background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%); border-color: #ff9800;">
        <h3 style="color: #fff;">‚è∞ Hora Pico</h3>
        <p class="value" id="peak-hour-display" style="color: #fff; font-size: 2rem;">
            {% if peak_hour_label != 'N/A' %}{{ peak_hour_label }}{% else %}--:--{% endif %}
        </p>
        <p class="subtitle" style="color: rgba(255,255,255,0.8);">{{ peak_hour_count }} entregas</p>
    </div>
</div>

<!-- ZONA 3: GR√ÅFICO PRINCIPAL (Mejorado) -->
<div class="chart-container" style="margin-bottom: 30px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px;">
        <h3 style="margin: 0; color: #00ff00; font-size: 1.5rem;">üìä Curva de Consumo - Entregas por Hora</h3>
        <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
            <div style="padding: 8px 15px; background: rgba(0, 255, 0, 0.1); border: 1px solid rgba(0, 255, 0, 0.3); border-radius: 8px;">
                <span style="color: #00ff00; font-size: 0.9rem;">
                    <strong>Hora actual:</strong> {{ "%02d:00"|format(current_hour) }} | 
                    <strong>Entregas:</strong> <span id="current-hour-value">{{ current_hour_count }}</span> | 
                    <strong>Promedio:</strong> {{ "%.1f"|format(avg_per_hour) }}/h
                </span>
            </div>
        </div>
    </div>
    <div class="chart-wrapper" style="height: 350px;">
        <canvas id="hourlyChart"></canvas>
    </div>
</div>

<!-- ZONA 4: ACCIONES INMEDIATAS -->
<div style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border: 2px solid rgba(102, 126, 234, 0.3); border-radius: 15px; padding: 25px; margin-bottom: 30px;">
    <h2 style="color: #00ff00; margin-top: 0; margin-bottom: 20px; font-size: 1.8rem;">üéØ Acciones Inmediatas</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
        <!-- Top Productos AHORA (√∫ltimos 30 min) -->
        <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 20px; border: 1px solid rgba(102, 126, 234, 0.3);">
            <h4 style="margin: 0 0 15px 0; color: #667eea; font-size: 1.2rem; display: flex; align-items: center; gap: 8px;">
                <span>üî•</span> <span>Top Productos (Ahora)</span>
            </h4>
            {% if shift_metrics and shift_metrics.get('top_productos_ahora') %}
                {% for producto, cantidad in shift_metrics.get('top_productos_ahora', [])[:3] %}
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; margin-bottom: 8px; background: rgba(102, 126, 234, 0.1); border-radius: 8px; border-left: 4px solid #667eea;">
                    <span style="color: #e8e8e8; flex: 1;">{{ loop.index }}. {{ producto }}</span>
                    <span style="color: #4caf50; font-weight: bold; font-size: 1.1rem;">{{ cantidad }}</span>
                </div>
                {% endfor %}
            {% else %}
                <p style="color: #aaa; margin: 0; text-align: center; padding: 20px;">Sin entregas en √∫ltimos 30 min</p>
            {% endif %}
            <p style="color: #888; font-size: 0.8rem; margin: 10px 0 0 0; text-align: center;">√öltimos 30 minutos</p>
        </div>
        
        <!-- Top Bartenders AHORA (√∫ltimos 30 min) -->
        <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 20px; border: 1px solid rgba(76, 175, 80, 0.3);">
            <h4 style="margin: 0 0 15px 0; color: #4caf50; font-size: 1.2rem; display: flex; align-items: center; gap: 8px;">
                <span>üë•</span> <span>Top Bartenders (Ahora)</span>
            </h4>
            {% if shift_metrics and shift_metrics.get('top_bartenders_ahora') %}
                {% for bartender, cantidad in shift_metrics.get('top_bartenders_ahora', [])[:3] %}
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; margin-bottom: 8px; background: rgba(76, 175, 80, 0.1); border-radius: 8px; border-left: 4px solid #4caf50;">
                    <span style="color: #e8e8e8; flex: 1;">{{ loop.index }}. {{ bartender }}</span>
                    <span style="color: #4caf50; font-weight: bold; font-size: 1.1rem;">{{ cantidad }}</span>
                </div>
                {% endfor %}
            {% else %}
                <p style="color: #aaa; margin: 0; text-align: center; padding: 20px;">Sin entregas en √∫ltimos 30 min</p>
            {% endif %}
            <p style="color: #888; font-size: 0.8rem; margin: 10px 0 0 0; text-align: center;">√öltimos 30 minutos</p>
        </div>
        
        <!-- Barra m√°s activa -->
        <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 20px; border: 1px solid rgba(255, 152, 0, 0.3);">
            <h4 style="margin: 0 0 15px 0; color: #ff9800; font-size: 1.2rem; display: flex; align-items: center; gap: 8px;">
                <span>üìç</span> <span>Barra M√°s Activa</span>
            </h4>
            {% if top_barras %}
                {% for barra, cantidad in top_barras[:1] %}
                <div style="text-align: center; padding: 15px;">
                    <div style="font-size: 2.5rem; color: #ff9800; font-weight: bold; margin-bottom: 5px;">{{ cantidad }}</div>
                    <div style="color: #e8e8e8; font-size: 1.1rem;">{{ barra }}</div>
                </div>
                {% endfor %}
            {% else %}
                <p style="color: #aaa; margin: 0; text-align: center; padding: 20px;">Sin datos</p>
            {% endif %}
        </div>
    </div>
</div>

<!-- ZONA 5: RANKINGS COMPLETOS (Colapsable) -->
<div style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border: 2px solid rgba(102, 126, 234, 0.3); border-radius: 15px; padding: 25px; margin-bottom: 30px;">
    <button onclick="toggleRankings()" style="width: 100%; background: rgba(102, 126, 234, 0.2); border: 2px solid rgba(102, 126, 234, 0.5); border-radius: 10px; padding: 15px; color: #667eea; font-size: 1.2rem; font-weight: 600; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: all 0.3s;" onmouseover="this.style.background='rgba(102, 126, 234, 0.3)';" onmouseout="this.style.background='rgba(102, 126, 234, 0.2)';">
        <span>üìã Rankings Completos del Turno</span>
        <span id="rankings-arrow" style="font-size: 1.5rem; transition: transform 0.3s;">‚ñº</span>
    </button>
    <div id="rankings-content" style="display: none; margin-top: 20px;">
        <div class="rankings-container">
            <div class="ranking-card">
                <h3>üèÜ Top Bartenders del Turno</h3>
                <ul class="ranking-list" id="bartenders-ranking">
                    {% for bartender, count in top_bartenders[:10] %}
                    <li class="ranking-item">
                        <span class="rank">#{{ loop.index }}</span>
                        <span class="name">{{ bartender }}</span>
                        <span class="count" data-bartender="{{ bartender }}">{{ count }}</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="ranking-card">
                <h3>üìç Top Barras del Turno</h3>
                <ul class="ranking-list" id="barras-ranking">
                    {% for barra, count in top_barras[:10] %}
                    <li class="ranking-item">
                        <span class="rank">#{{ loop.index }}</span>
                        <span class="name">{{ barra }}</span>
                        <span class="count" data-barra="{{ barra }}">{{ count }}</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="ranking-card">
                <h3>ü•§ Top Productos del Turno</h3>
                <ul class="ranking-list" id="items-ranking">
                    {% for item, count in top_items[:10] %}
                    <li class="ranking-item">
                        <span class="rank">#{{ loop.index }}</span>
                        <span class="name">{{ item }}</span>
                        <span class="count" data-item="{{ item }}">{{ count }}</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        
        {% if top_categorias %}
        <div class="rankings-container" style="margin-top: 20px;">
            <div class="ranking-card">
                <h3>üì¶ Top Categor√≠as del Turno</h3>
                <ul class="ranking-list" id="categorias-ranking">
                    {% for categoria, count in top_categorias[:10] %}
                    <li class="ranking-item">
                        <span class="rank">#{{ loop.index }}</span>
                        <span class="name">{{ categoria }}</span>
                        <span class="count">{{ count }} unidades</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        {% endif %}
    </div>
</div>

<!-- ZONA 6: ESTAD√çSTICAS SECUNDARIAS (Colapsable) -->
<div style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border: 2px solid rgba(0, 102, 255, 0.3); border-radius: 15px; padding: 25px; margin-bottom: 30px;">
    <button onclick="toggleSecondaryStats()" style="width: 100%; background: rgba(0, 102, 255, 0.2); border: 2px solid rgba(0, 102, 255, 0.5); border-radius: 10px; padding: 15px; color: #0066ff; font-size: 1.2rem; font-weight: 600; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: all 0.3s;" onmouseover="this.style.background='rgba(0, 102, 255, 0.3)';" onmouseout="this.style.background='rgba(0, 102, 255, 0.2)';">
        <span>üìä Estad√≠sticas Secundarias (Entradas, Kiosko)</span>
        <span id="secondary-stats-arrow" style="font-size: 1.5rem; transition: transform 0.3s;">‚ñº</span>
    </button>
    <div id="secondary-stats-content" style="display: none; margin-top: 20px;">
        <div class="entradas-grid" style="margin-bottom: 20px;">
            <div class="entrada-card">
                <h4>Total Personas</h4>
                <p class="value" id="total-personas">{{ total_personas_en_local }}</p>
            </div>
            <div class="entrada-card green">
                <h4>Entradas $5,000</h4>
                <p class="value" id="ent-5000">{{ entradas_5000_count }}</p>
                {% if total_personas_en_local > 0 %}
                <p style="color: #aaa; margin-top: 5px; font-size: 0.9rem;">
                    {{ "%.1f"|format((entradas_5000_count / total_personas_en_local * 100)) }}%
                </p>
                {% endif %}
            </div>
            <div class="entrada-card orange">
                <h4>Entradas $10,000</h4>
                <p class="value" id="ent-10000">{{ entradas_10000_count }}</p>
                {% if total_personas_en_local > 0 %}
                <p style="color: #aaa; margin-top: 5px; font-size: 0.9rem;">
                    {{ "%.1f"|format((entradas_10000_count / total_personas_en_local * 100)) }}%
                </p>
                {% endif %}
            </div>
        </div>
        
        <div class="chart-container">
            <h3>üë• Curva de Entrada - Personas por Hora ({{ peak_entradas_hour_label }}: {{ peak_entradas_count }} personas)</h3>
            <div class="chart-wrapper" style="height: 250px;">
                <canvas id="entradasChart"></canvas>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script>
// Gr√°fico de Consumo por Hora del Turno (Curva de Compra)
const hourlyCtx = document.getElementById('hourlyChart').getContext('2d');
let hourlyChart = new Chart(hourlyCtx, {
    type: 'line',
    data: {
        labels: {{ hours_labels|tojson }},
        datasets: [{
            label: 'Entregas por Hora',
            data: {{ hours_data|tojson }},
            backgroundColor: 'rgba(0, 255, 0, 0.2)',
            borderColor: 'rgba(0, 255, 0, 1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointRadius: 5,
            pointHoverRadius: 7
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                labels: { color: '#e8e8e8' }
            },
            tooltip: {
                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                titleColor: '#00ff00',
                bodyColor: '#e8e8e8'
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                ticks: { color: '#aaa' },
                grid: { color: '#444' }
            },
            x: {
                ticks: { color: '#aaa', maxRotation: 45, minRotation: 45 },
                grid: { color: '#444' }
            }
        }
    }
});

// Gr√°fico de Curva de Entrada (Entradas por Hora)
const entradasCtx = document.getElementById('entradasChart').getContext('2d');
let entradasChart = new Chart(entradasCtx, {
    type: 'line',
    data: {
        labels: {{ entradas_hours_labels|tojson }},
        datasets: [{
            label: 'Personas que Entraron',
            data: {{ entradas_hours_data|tojson }},
            backgroundColor: 'rgba(0, 102, 255, 0.2)',
            borderColor: 'rgba(0, 102, 255, 1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointRadius: 5,
            pointHoverRadius: 7
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                labels: { color: '#e8e8e8' }
            },
            tooltip: {
                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                titleColor: '#0066ff',
                bodyColor: '#e8e8e8'
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                ticks: { color: '#aaa' },
                grid: { color: '#444' }
            },
            x: {
                ticks: { color: '#aaa', maxRotation: 45, minRotation: 45 },
                grid: { color: '#444' }
            }
        }
    }
});

// Funci√≥n para actualizar timestamp
function updateTimestamp() {
    const now = new Date();
    const timeStr = now.toLocaleTimeString('es-CL');
    document.getElementById('update-time').textContent = timeStr;
}

// Actualizar timestamp cada segundo
updateTimestamp();
setInterval(updateTimestamp, 1000);

// Conexi√≥n WebSocket para actualizaciones en tiempo real (deshabilitada - secci√≥n de estad√≠sticas eliminada)
// const statsSocket = io('/admin_stats');

let statsData = {
    today_count: {{ today_count }},
    current_hour_count: {{ current_hour_count }},
    avg_per_hour: {{ avg_per_hour }},
    personas: {{ total_personas_en_local }},
    entradas_5000: {{ entradas_5000_count }},
    entradas_10000: {{ entradas_10000_count }},
    rankings: {
        bartenders: {},
        barras: {},
        items: {},
        categorias: {}
    }
};

// Inicializar rankings
{% for bartender, count in top_bartenders[:10] %}
statsData.rankings.bartenders['{{ bartender }}'] = {{ count }};
{% endfor %}
{% for barra, count in top_barras[:10] %}
statsData.rankings.barras['{{ barra }}'] = {{ count }};
{% endfor %}
{% for item, count in top_items[:10] %}
statsData.rankings.items['{{ item }}'] = {{ count }};
{% endfor %}
{% for categoria, count in top_categorias[:10] %}
statsData.rankings.categorias['{{ categoria }}'] = {{ count }};
{% endfor %}

statsSocket.on('connect', function() {
    console.log('‚úÖ Conectado al stream de estad√≠sticas en tiempo real');
});

statsSocket.on('disconnect', function() {
    console.log('‚ö†Ô∏è Desconectado del stream de estad√≠sticas');
});

statsSocket.on('stats_update', function(data) {
    console.log('üìä Actualizaci√≥n de estad√≠sticas:', data);
    
    if (data.type === 'new_delivery') {
        // Actualizar contador del turno
        statsData.today_count += (parseInt(data.qty) || 1);
        updateValue('today-count', statsData.today_count);
        
        // Actualizar contador de hora actual
        const currentHour = new Date().getHours();
        if (data.hour === currentHour || data.hour === {{ current_hour }}) {
            statsData.current_hour_count += (parseInt(data.qty) || 1);
            updateValue('current-hour-value', statsData.current_hour_count);
            updateValue('current-hour-count', statsData.current_hour_count);
        }
        
        // Actualizar promedio por hora
        const hoursElapsed = Math.max(1, currentHour >= 21 ? (currentHour - 21) : (currentHour + 3));
        statsData.avg_per_hour = statsData.today_count / hoursElapsed;
        updateValue('avg-per-hour', statsData.avg_per_hour.toFixed(1));
        updateValue('avg-hour', statsData.avg_per_hour.toFixed(1));
        
        // Actualizar rankings
        if (data.bartender) {
            if (!statsData.rankings.bartenders[data.bartender]) {
                statsData.rankings.bartenders[data.bartender] = 0;
            }
            statsData.rankings.bartenders[data.bartender] += (parseInt(data.qty) || 1);
        }
        
        if (data.barra) {
            if (!statsData.rankings.barras[data.barra]) {
                statsData.rankings.barras[data.barra] = 0;
            }
            statsData.rankings.barras[data.barra] += (parseInt(data.qty) || 1);
        }
        
        if (data.item) {
            if (!statsData.rankings.items[data.item]) {
                statsData.rankings.items[data.item] = 0;
            }
            statsData.rankings.items[data.item] += (parseInt(data.qty) || 1);
        }
        
        // Actualizar categor√≠as si est√° disponible
        if (data.categoria) {
            if (!statsData.rankings.categorias[data.categoria]) {
                statsData.rankings.categorias[data.categoria] = 0;
            }
            statsData.rankings.categorias[data.categoria] += (parseInt(data.qty) || 1);
        }
        
        // Actualizar gr√°fico
        if (hourlyChart && hourlyChart.data.datasets[0] && data.hour !== undefined) {
            const hourIndex = {{ hours_labels|tojson }}.indexOf('{{ "%02d:00"|format(current_hour) }}');
            if (hourIndex !== -1 || data.hour === {{ current_hour }}) {
                const idx = data.hour === {{ current_hour }} ? 
                    {{ hours_labels|tojson }}.indexOf('{{ "%02d:00"|format(current_hour) }}') : 
                    (data.hour >= 21 ? data.hour - 21 : data.hour + 3);
                if (idx >= 0 && idx < hourlyChart.data.datasets[0].data.length) {
                    hourlyChart.data.datasets[0].data[idx] += (parseInt(data.qty) || 1);
                    hourlyChart.update('none');
                }
            }
        }
        
        updateRankings();
    }
});

// Funci√≥n para actualizar valores con animaci√≥n
function updateValue(elementId, newValue) {
    const element = document.getElementById(elementId);
    if (!element) return;
    
    const oldValue = parseInt(element.textContent) || 0;
    const newValueInt = parseInt(newValue) || parseFloat(newValue) || 0;
    
    if (oldValue !== newValueInt) {
        element.classList.add('updating');
        element.textContent = typeof newValue === 'number' && newValue % 1 !== 0 ? 
            newValue.toFixed(1) : newValueInt;
        
        setTimeout(() => {
            element.classList.remove('updating');
        }, 500);
    }
}

// Funci√≥n para actualizar rankings
function updateRankings() {
    // Actualizar bartenders
    updateRankingList('bartenders-ranking', statsData.rankings.bartenders);
    // Actualizar barras
    updateRankingList('barras-ranking', statsData.rankings.barras);
    // Actualizar items
    updateRankingList('items-ranking', statsData.rankings.items);
    // Actualizar categor√≠as
    updateRankingList('categorias-ranking', statsData.rankings.categorias);
}

function updateRankingList(listId, data) {
    const list = document.getElementById(listId);
    if (!list) return;
    
    // Ordenar y obtener top 10
    const sorted = Object.entries(data)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 10);
    
    // Determinar el tipo de atributo data seg√∫n el listId
    let dataAttr = 'item';
    let suffix = '';
    if (listId.includes('bartender')) {
        dataAttr = 'bartender';
    } else if (listId.includes('barra')) {
        dataAttr = 'barra';
    } else if (listId.includes('categoria')) {
        dataAttr = 'categoria';
        suffix = ' unidades';
    }
    
    // Actualizar o crear items
    sorted.forEach(([name, count], index) => {
        let item = list.querySelector(`[data-${dataAttr}="${name}"]`)?.closest('.ranking-item');
        
        if (!item) {
            item = document.createElement('li');
            item.className = 'ranking-item';
            item.innerHTML = `
                <span class="rank">#${index + 1}</span>
                <span class="name">${name}</span>
                <span class="count" data-${dataAttr}="${name}">${count}${suffix}</span>
            `;
            list.appendChild(item);
        } else {
            item.querySelector('.count').textContent = count + suffix;
            item.querySelector('.rank').textContent = `#${index + 1}`;
        }
    });
    
    // Ordenar visualmente
    const items = Array.from(list.children);
    items.sort((a, b) => {
        const countA = parseInt(a.querySelector('.count').textContent) || 0;
        const countB = parseInt(b.querySelector('.count').textContent) || 0;
        return countB - countA;
    });
    items.forEach((item, index) => {
        item.querySelector('.rank').textContent = `#${index + 1}`;
        list.appendChild(item);
    });
}

// Actualizar estad√≠sticas cada 10 segundos (fallback)
setInterval(function() {
    // Actualizar p√°gina completa cada 60 segundos para sincronizar
    const now = new Date();
    if (now.getSeconds() === 0) {
        location.reload();
    }
}, 10000);

// Funciones para colapsar/expandir secciones
function toggleRankings() {
    const content = document.getElementById('rankings-content');
    const arrow = document.getElementById('rankings-arrow');
    if (content && arrow) {
        if (content.style.display === 'none' || !content.style.display) {
            content.style.display = 'block';
            arrow.style.transform = 'rotate(180deg)';
        } else {
            content.style.display = 'none';
            arrow.style.transform = 'rotate(0deg)';
        }
    }
}

function toggleSecondaryStats() {
    const content = document.getElementById('secondary-stats-content');
    const arrow = document.getElementById('secondary-stats-arrow');
    if (content && arrow) {
        if (content.style.display === 'none' || !content.style.display) {
            content.style.display = 'block';
            arrow.style.transform = 'rotate(180deg)';
        } else {
            content.style.display = 'none';
            arrow.style.transform = 'rotate(0deg)';
        }
    }
}
</script>

<!-- BOT√ìN APERTURA (GRANDE Y PROMINENTE) -->
<div style="margin-top: 50px; margin-bottom: 50px; text-align: center;">
    <a href="{{ url_for('routes.apertura') }}" style="display: inline-block; padding: 30px 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: 4px solid rgba(102, 126, 234, 0.8); border-radius: 20px; color: white; text-decoration: none; font-weight: bold; font-size: 2rem; text-align: center; box-shadow: 0 15px 50px rgba(102, 126, 234, 0.4); transition: all 0.3s ease; position: relative; overflow: hidden;" onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 20px 60px rgba(102, 126, 234, 0.6)';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 15px 50px rgba(102, 126, 234, 0.4)';">
        <span style="display: block; font-size: 3rem; margin-bottom: 10px;">üöÄ</span>
        <span style="display: block;">APERTURA</span>
        <span style="display: block; font-size: 1rem; opacity: 0.9; margin-top: 5px;">Accede a todos los m√≥dulos administrativos</span>
    </a>
</div>
{% endblock %}

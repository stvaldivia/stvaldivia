{% extends "base.html" %}
{% block title %}Abrir Sesión de Caja - BIMBA{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
<style>
    .session-form-container {
        max-width: 600px;
        margin: 2rem auto;
        padding: 1.5rem;
        background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
        border-radius: 16px;
        border: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    .form-group {
        margin-bottom: 1.5rem;
    }
    
    .form-group label {
        display: block;
        color: #e8e8e8;
        margin-bottom: 0.5rem;
        font-weight: bold;
    }
    
    .form-group input,
    .form-group select {
        width: 100%;
        padding: 0.75rem;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        color: #e8e8e8;
        font-size: 1rem;
        box-sizing: border-box;
    }
    
    .form-group input:focus,
    .form-group select:focus {
        outline: none;
        border-color: #667eea;
        background: rgba(255, 255, 255, 0.08);
    }
    
    .help-text {
        color: #aaa;
        font-size: 0.85rem;
        margin-top: 0.5rem;
    }
    
    .btn {
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        font-weight: bold;
        font-size: 1rem;
        transition: all 0.3s ease;
    }
    
    .btn-primary {
        background: rgba(102, 126, 234, 0.3);
        border: 1px solid rgba(102, 126, 234, 0.5);
        color: #667eea;
        width: 100%;
    }
    
    .btn-primary:hover {
        background: rgba(102, 126, 234, 0.5);
        color: #fff;
    }
    
    .btn-secondary {
        background: rgba(158, 158, 158, 0.3);
        border: 1px solid rgba(158, 158, 158, 0.5);
        color: #9e9e9e;
        width: 100%;
        margin-top: 0.5rem;
    }
    
    .btn-secondary:hover {
        background: rgba(158, 158, 158, 0.5);
        color: #fff;
    }
</style>
{% endblock %}

{% block content %}
<div class="session-form-container">
    <h1 style="color: #e8e8e8; margin-bottom: 1.5rem; text-align: center;">➕ Abrir Sesión de Caja</h1>
    
    <form method="POST" action="{{ url_for('caja.session_open') }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
        
        <div class="form-group">
            <label for="register_id">Caja *</label>
            <select id="register_id" name="register_id" required>
                <option value="">-- Seleccionar caja --</option>
                {% for reg in registers %}
                <option value="{{ reg.id }}">{{ reg.name }} ({{ reg.code }})</option>
                {% endfor %}
            </select>
            <div class="help-text">Selecciona la caja que deseas abrir</div>
        </div>
        
        <div class="form-group">
            <label for="jornada_id">Jornada</label>
            <select id="jornada_id" name="jornada_id">
                <option value="">-- Usar jornada abierta actual --</option>
                {% for jornada in jornadas_abiertas %}
                <option value="{{ jornada.id }}">{{ jornada.nombre_fiesta }} - {{ jornada.fecha_jornada }}</option>
                {% endfor %}
            </select>
            <div class="help-text">Si no seleccionas, se usará la jornada abierta actual</div>
        </div>
        
        <div class="form-group">
            <label for="initial_cash">Fondo Inicial (CLP)</label>
            <input type="number" 
                   id="initial_cash" 
                   name="initial_cash" 
                   step="1" 
                   min="0"
                   placeholder="0">
            <div class="help-text">Monto inicial de efectivo en la caja (opcional)</div>
        </div>
        
        <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid rgba(255, 255, 255, 0.05);">
            <button type="submit" class="btn btn-primary">Abrir Sesión</button>
            <a href="{{ url_for('caja.register') }}" class="btn btn-secondary" style="display: block; text-align: center; text-decoration: none;">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}


